(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{145:function(t,e,a){},146:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a(11),c=a.n(r),o=a(10),i=a(46),s=a(86),l=a(87),u=a(6),d=a(103),j=Object(i.combineReducers)({productList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PRODUCT_LIST_REQUEST":return Object(u.a)(Object(u.a)({},t),{},{loading:!0,products:[],error:""});case"PRODUCT_LIST_SUCCESS":return Object(u.a)(Object(u.a)({},t),{},{loading:!1,products:e.payload,error:""});case"PRODUCT_LIST_FAILED":return Object(u.a)(Object(u.a)({},t),{},{loading:!1,error:e.payload});case"DELETE_PRODUCT_LIST_SUCCESS":return Object(u.a)(Object(u.a)({},t),{},{products:t.products.filter((function(t){return t._id!==e.payload})),error:""});case"DELETE_PRODUCT_LIST_FAILED":return Object(u.a)(Object(u.a)({},t),{},{loading:!1,error:e.payload});default:return t}},categories:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{categories:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CATEGORIES_REQUEST":return{categories:[]};case"CATEGORIES_SUCCESS":return{categories:e.payload};case"CATEGORIES_FAIL":return{error:e.payload,categories:[]};default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUser:{}},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"USER_LOGIN_REQUEST":return Object(u.a)(Object(u.a)({},t),{},{loading:!0,error:""});case"USER_LOGIN_SUCCESS":return Object(u.a)(Object(u.a)({},t),{},{loading:!1,currentUser:e.payload,error:""});case"USER_LOGIN_FAILED":return Object(u.a)(Object(u.a)({},t),{},{loading:!1,error:e.payload});case"USER_REGISTER_REQUEST":return Object(u.a)(Object(u.a)({},t),{},{loading:!0,error:""});case"USER_REGISTER_SUCCESS":return Object(u.a)(Object(u.a)({},t),{},{loading:!1,currentUser:e.payload,error:""});case"USER_REGISTER_FAILED":return Object(u.a)(Object(u.a)({},t),{},{loading:!1,error:e.payload});case"USER_LOGOUT":return{};default:return t}},cart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartList:[],loading:!1,currentId:""},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_CART_ITEM_REQUEST":return Object(u.a)(Object(u.a)({},t),{},{loading:!0,currentId:e.payload});case"ADD_CART_ITEM_SUCCESS":var a=e.payload,n=t.cartList.find((function(t){return t.product===a.product}));return n?Object(u.a)(Object(u.a)({},t),{},{cartList:t.cartList.map((function(t){return t.product===n.product?a:t})),loading:!1}):Object(u.a)(Object(u.a)({},t),{},{cartList:[].concat(Object(d.a)(t.cartList),[a]),loading:!1});case"ADD_CART_ITEM_FAILED":return Object(u.a)(Object(u.a)({},t),{},{error:e.payload,loading:!1});case"DELETE_CART_ITEM":return Object(u.a)(Object(u.a)({},t),{},{cartList:t.cartList.filter((function(t){return t.product!==e.payload}))});default:return t}},productForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:"",loading:!1,state:"add"},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PRODUCT_FORM_ACCESS":return Object(u.a)(Object(u.a)({},t),{},{state:e.payload,error:""});case"PRODUCT_FORM_SUBMIT_REQUEST":return Object(u.a)(Object(u.a)({},t),{},{error:"",loading:!0});case"PRODUCT_FORM_SUBMIT_SUCCESS":return Object(u.a)(Object(u.a)({},t),{},{error:"",loading:!1});case"PRODUCT_FORM_SUBMIT_FAILED":return Object(u.a)(Object(u.a)({},t),{},{error:e.payload,loading:!1});default:return t}},product:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:"",loading:!1,product:{}},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PRODUCT_REQUEST":return Object(u.a)(Object(u.a)({},t),{},{error:"",loading:!0});case"PRODUCT_SUCCESS":return Object(u.a)(Object(u.a)({},t),{},{error:"",loading:!1,product:e.payload});case"PRODUCT_FAILURE":return Object(u.a)(Object(u.a)({},t),{},{error:e.payload,loading:!1});default:return t}}}),p={auth:{currentUser:localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")):null},cart:{cartList:localStorage.getItem("cartList")?JSON.parse(localStorage.getItem("cartList")):[]}},b=[s.a],O=Object(i.createStore)(j,p,Object(l.composeWithDevTools)(i.applyMiddleware.apply(void 0,b))),m=a(198),h=a(199),g=a(20),f=a(15),x=a(176),y=a(178),S=a(180),v=a(181),C=a(182),E=a(149),_=a(183),T=a(93),R=a.n(T),U=a(94),I=a.n(U),D=a(14),L=a.n(D),w=a(22),A=a(88),k=a.n(A).a.create({baseURL:"http://localhost:8080/api",headers:{"Content-Type":"application/json"}}),P=a(2),N=Object(x.a)((function(t){return{root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},logo:{flexGrow:1,textDecoration:"none"},shopingCart:{marginRight:t.spacing(2)}}}));function F(){var t=N(),e=Object(o.b)(),a=Object(o.c)((function(t){return t.auth})).currentUser,n=Object(o.c)((function(t){return t.cart})).cartList;return Object(P.jsx)("div",{className:t.root,children:Object(P.jsx)(v.a,{position:"static",color:"inherit",children:Object(P.jsxs)(C.a,{children:[Object(P.jsx)(E.a,{variant:"h6",className:t.logo,component:g.b,to:"/",color:"secondary",children:"MyShop"}),a&&"admin"!==a.role||!a?Object(P.jsx)(y.a,{className:t.shopingCart,component:g.b,to:"/cart",children:Object(P.jsx)(S.a,{badgeContent:n.length,color:"error",children:Object(P.jsx)(R.a,{})})}):null,a?Object(P.jsx)(_.a,{color:"inherit",onClick:function(){e((function(t){localStorage.removeItem("currentUser"),t({type:"USER_LOGOUT"})}))},endIcon:Object(P.jsx)(I.a,{}),children:"Logout"}):Object(P.jsx)(_.a,{color:"secondary",variant:"outlined",component:g.b,to:"/auth",children:"Login"})]})})})}var M=a(42),G=a(203),B=a(102),Q=a(192),q=a(184),W=a(193),J=a(95),z=a.n(J),H=a(37),K=a(202),$=a(186),V=a(187),X=a(188),Y=a(189),Z=a(185),tt=a(190),et=a(191),at=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var a=Object(w.a)(L.a.mark((function a(n,r){var c,o,i;return L.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"ADD_CART_ITEM_REQUEST",payload:t}),a.next=4,k.get("/products/".concat(t));case 4:c=a.sent,o=c.data,i=o.data,n({type:"ADD_CART_ITEM_SUCCESS",payload:{product:i._id,title:i.title,image:i.image,price:i.price,stock:i.stock,quantity:e}}),localStorage.setItem("cartList",JSON.stringify(r().cart.cartList)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:"ADD_CART_ITEM_FAILED",payload:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(t,e){return a.apply(this,arguments)}}()},nt=function(t){return t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")},rt=Object(x.a)((function(t){var e;return e={root:{maxWidth:"100%",borderRadius:"15px"},cardMedia:{height:0,paddingTop:"56.25%",backgroundSize:"cover"},cardContent:{display:"flex",flexDirection:"column",justifyContent:"flex-start"}},Object(H.a)(e,t.breakpoints.down("sm"),{cardContent:{flexDirection:"row",justifyContent:"space-between"}}),Object(H.a)(e,"cardActions",{display:"flex",justifyContent:"flex-end"}),e})),ct=function(t){var e,a=t.product,n=t.timeOut,r=t.isAuthenticated,c=t.buttonAction,i=t.handleDeleteProduct,s=rt(),l=Object(o.b)(),d=Object(o.c)((function(t){return t.cart})),j=d.loading,p=d.currentId,b=d.cartList;return Object(P.jsx)(K.a,Object(u.a)(Object(u.a)({in:!!a,style:{transformOrigin:"0 0 0"}},a?{timeout:n}:{}),{},{children:Object(P.jsxs)($.a,{className:s.root,children:[Object(P.jsx)(V.a,{className:s.cardMedia,image:a.image,title:a.title}),Object(P.jsxs)(X.a,{children:[Object(P.jsxs)("div",{className:s.cardContent,children:[Object(P.jsx)(E.a,{gutterBottom:!0,variant:"h5",component:"h2",children:a.title}),Object(P.jsx)(E.a,{gutterBottom:!0,variant:"subtitle1",component:"h2",color:"secondary",className:s.contentPrice,children:"Rp. ".concat(nt(a.price))})]}),a.description&&Object(P.jsx)(E.a,{variant:"body2",color:"textSecondary",component:"p",children:a.description})]}),Object(P.jsx)(Y.a,{disableSpacing:!0,className:s.cardActions,children:"admin"===c?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(y.a,{color:"secondary","aria-label":"Delete Product",onClick:function(){return i(a._id)},children:Object(P.jsx)(tt.a,{})}),Object(P.jsx)(y.a,{color:"primary","aria-label":"Edit Product",component:g.b,to:"/product/".concat(a._id),children:Object(P.jsx)(et.a,{})})]}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(E.a,{variant:"body2",color:"textSecondary",component:"p",children:"Tambah Keranjang"}),(e=a._id,j&&p===e?Object(P.jsx)(q.a,{color:"secondary"}):Object(P.jsx)(y.a,{"aria-label":"Add to Cart",color:"secondary",disabled:!r||b.some((function(t){return t.product===e})),onClick:function(){return l(at(a._id))},children:Object(P.jsx)(Z.a,{})}))]})})]})}))},ot=function(){return function(){var t=Object(w.a)(L.a.mark((function t(e){var a,n;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e({type:"CATEGORIES_REQUEST"}),t.next=4,k.get("/category");case 4:a=t.sent,n=a.data,e({type:"CATEGORIES_SUCCESS",payload:n.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e({type:"CATEGORIES_FAIL",payload:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},it=Object(x.a)((function(t){return{mainApp:{marginTop:t.spacing(2),flexGrow:1},productListTitle:{fontSize:"2rem"},productListHeader:{display:"flex",justifyContent:"space-between"},headingDivider:{margin:"1.5rem auto",width:"100%",marginTop:"0.5rem"},productAdd:{marginBottom:"1rem",flexGrow:1,justifyContent:"flex-end",display:"flex"}}})),st=function(){var t=it(),e=Object(n.useState)(null),a=Object(M.a)(e,2),r=a[0],c=a[1],i=Boolean(r),s=new URLSearchParams(Object(f.f)().search),l=s.get("categoryId"),u=s.get("title"),d=Object(o.b)(),j=Object(o.c)((function(t){return t.productList})),p=j.products,b=j.loading,O=j.error,m=Object(o.c)((function(t){return t.categories})).categories,h=Object(o.c)((function(t){return t.auth})).currentUser,x=function(t){d(function(t){return function(){var e=Object(w.a)(L.a.mark((function e(a,n){var r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n().auth.currentUser,e.next=4,k.delete("/products/".concat(t),{headers:{Authorization:"Bearer ".concat(r.token)}});case 4:"success"===e.sent.data.status&&a({type:"DELETE_PRODUCT_LIST_SUCCESS",payload:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:"DELETE_PRODUCT_LIST_FAILED",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()}(t))};Object(n.useEffect)((function(){d(function(t){return function(){var e=Object(w.a)(L.a.mark((function e(a){var n,r,c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"PRODUCT_LIST_REQUEST"}),n={},t&&(n.categoryId=t),e.next=6,k.get("/products",{params:n});case 6:r=e.sent,c=r.data,a({type:"PRODUCT_LIST_SUCCESS",payload:c.data}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:"PRODUCT_LIST_FAILED",payload:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()}(l)),d(ot())}),[l,d]);var S=m.map((function(t){return Object(P.jsx)(G.a,{component:g.b,to:"/?categoryId=".concat(t._id,"&title=").concat(t.title),onClick:function(){return c(null)},children:t.title},t._id)})),v=function(){return h&&"admin"===h.role?Object(P.jsx)("div",{className:t.productAdd,children:Object(P.jsx)(_.a,{color:"primary",component:g.b,to:"/product",variant:"outlined",children:"Tambah Product"})}):null};return Object(P.jsxs)("main",{className:t.mainApp,children:[Object(P.jsxs)("div",{className:t.productListHeader,children:[Object(P.jsx)(E.a,{variant:"h2",className:t.productListTitle,align:"center",children:u||"All Product"}),Object(P.jsx)(y.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"secondary",onClick:function(t){return c(t.currentTarget)},children:Object(P.jsx)(z.a,{})}),Object(P.jsx)(B.a,{id:"menu-appbar",anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:function(){return c(null)},children:S})]}),Object(P.jsx)(Q.a,{variant:"middle",className:t.headingDivider}),Object(P.jsx)(v,{}),b?Object(P.jsx)(q.a,{color:"secondary"}):O?Object(P.jsx)(E.a,{children:O}):Object(P.jsx)(W.a,{container:!0,spacing:4,children:p.map((function(t,e){var a=500*e;return Object(P.jsx)(W.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(P.jsx)(ct,{product:t,timeOut:a,isAuthenticated:!!h,buttonAction:h?h.role:"",handleDeleteProduct:x})},t._id)}))})]})},lt=a(105),ut=a(96),dt=a.n(ut),jt=a(97),pt=a.n(jt),bt=a(98),Ot=a.n(bt),mt=Object(x.a)((function(t){return{product:{display:"flex",padding:t.spacing(2)},cartProductImage:{width:"7rem",height:"7rem"},cartProductDetail:{marginLeft:t.spacing(2),display:"flex",flexDirection:"column",flexGrow:2,justifyContent:"space-between"},cartActions:{alignSelf:"flex-end",justifySelf:"center",display:"flex"},productQuantity:{marginLeft:"1rem",display:"flex",alignItems:"center"}}})),ht=function(t){var e=t.cartProduct,a=t.timeOut,n=t.handleRemoveCart,r=t.handleQuantity,c=mt(),i=Object(o.c)((function(t){return t.cart})).loading;return Object(P.jsx)(K.a,Object(u.a)(Object(u.a)({in:!!e,style:{transformOrigin:"0 0 0"}},e?{timeout:a}:{}),{},{children:Object(P.jsx)(lt.a,{style:{marginBottom:"1rem"},children:Object(P.jsxs)("div",{className:c.product,children:[Object(P.jsx)("img",{src:e.image,alt:e.title,className:c.cartProductImage}),Object(P.jsxs)("div",{className:c.cartProductDetail,children:[Object(P.jsxs)("div",{children:[Object(P.jsx)(E.a,{variant:"h6",component:"h6",children:e.title}),Object(P.jsx)(E.a,{variant:"subtitle1",color:"textSecondary",component:"h6",children:"Rp.".concat(nt(e.price))})]}),Object(P.jsxs)("div",{className:c.cartActions,children:[Object(P.jsx)(y.a,{color:"secondary","aria-label":"Delete Cart Product",component:"button",onClick:function(){return n(e.product)},children:Object(P.jsx)(dt.a,{})}),Object(P.jsxs)("div",{className:c.productQuantity,children:[Object(P.jsx)(y.a,{"aria-label":"Decrease Product",component:"button",disabled:1===e.quantity||i,onClick:function(){return r(e.product,e.quantity-1)},children:Object(P.jsx)(pt.a,{})}),Object(P.jsx)(E.a,{variant:"subtitle1",color:"textSecondary",component:"h6",style:{margin:"0 1rem"},children:e.quantity}),Object(P.jsx)(y.a,{"aria-label":"Increase Product",component:"button",disabled:e.stock===e.quantity||i,onClick:function(){return r(e.product,e.quantity+1)},children:Object(P.jsx)(Ot.a,{})})]})]})]})]})})}))},gt=Object(x.a)((function(t){return{main:{marginTop:t.spacing(3)},totalCart:{padding:t.spacing(3),display:"flex",flexDirection:"column"},countCart:{display:"flex",justifyContent:"space-between",alignItems:"center"}}})),ft=function(){var t=gt(),e=Object(o.c)((function(t){return t.cart})).cartList,a=Object(o.b)(),n=function(t){a(function(t){return function(e,a){e({type:"DELETE_CART_ITEM",payload:t}),localStorage.setItem("cartList",JSON.stringify(a().cart.cartList))}}(t))},r=function(t,e){a(at(t,e))},c=e.reduce((function(t,e){return t+e.price*e.quantity}),0),i=e.reduce((function(t,e){return t+e.quantity}),0);return Object(P.jsxs)(W.a,{container:!0,className:t.main,spacing:2,children:[Object(P.jsx)(W.a,{item:!0,xs:12,lg:8,children:e.length>0?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(_.a,{component:g.b,to:"/",color:"secondary",children:"Tambah Barang Lagi"}),e.map((function(t,e){return Object(P.jsx)(ht,{cartProduct:t,timeOut:300*e,handleRemoveCart:n,handleQuantity:r},t.product)}))]}):Object(P.jsx)(_.a,{component:g.b,to:"/",children:"Tidak Ada Barang Belanjaan! Kembali"})}),Object(P.jsx)(W.a,{item:!0,xs:12,lg:4,children:Object(P.jsxs)(lt.a,{elevation:3,className:t.totalCart,children:[Object(P.jsx)(E.a,{variant:"h6",children:"Ringkasan Belanja"}),Object(P.jsxs)("div",{className:t.countCart,children:[Object(P.jsx)(E.a,{variant:"body2",color:"textSecondary",component:"p",children:"Total Barang Belanja (".concat(i,")")}),Object(P.jsx)(E.a,{variant:"subtitle1",color:"textSecondary",children:"Rp. ".concat(nt(c))})]}),e.length>0&&Object(P.jsx)(_.a,{variant:"outlined",color:"secondary",component:g.b,to:"/",style:{alignSelf:"flex-end",marginTop:"10px"},children:"Checkout"})]})})]})},xt=a(207),yt=a(101),St=a.n(yt),vt=a(204),Ct=a(197),Et=a(99),_t=a.n(Et),Tt=a(100),Rt=a.n(Tt),Ut=function(t){var e=t.name,a=t.onChange,n=t.type,r=t.label,c=t.showPassword,o=t.value,i=t.req,s=void 0===i||i;return Object(P.jsx)(W.a,{item:!0,xs:12,sm:12,lg:12,children:Object(P.jsx)(vt.a,{name:e,fullWidth:!0,onChange:a,variant:"outlined",label:r,required:s,value:o||"",type:n,InputProps:e.includes("password")?{endAdornment:Object(P.jsx)(Ct.a,{position:"end",children:Object(P.jsx)(y.a,{onClick:c,children:"password"===n?Object(P.jsx)(_t.a,{}):Object(P.jsx)(Rt.a,{})})})}:null})})},It=Object(x.a)((function(t){return{mainLogin:{marginTop:t.spacing(2)},paperContent:{display:"flex",flexDirection:"column",alignItems:"center",padding:t.spacing(2)},avatar:{margin:t.spacing(1),backgroundColor:t.palette.secondary.main},form:{width:"100%",marginTop:t.spacing(3)},submit:{marginTop:t.spacing(2)}}})),Dt={name:"",email:"",password:"",passwordConfirm:""},Lt=function(t){var e=t.history,a=Object(n.useState)(!0),r=Object(M.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)(Dt),l=Object(M.a)(s,2),d=l[0],j=l[1],p=Object(n.useState)(!1),b=Object(M.a)(p,2),O=b[0],h=b[1],g=Object(o.b)(),f=It(),x=Object(o.c)((function(t){return t.auth})),y=x.currentUser,S=x.loading,v=x.error,C=function(t){j(Object(u.a)(Object(u.a)({},d),{},Object(H.a)({},t.target.name,t.target.value)))},T=function(){h((function(t){return!t}))};return Object(n.useEffect)((function(){}),[y,e]),Object(P.jsxs)(m.a,{component:"main",maxWidth:"sm",className:f.mainLogin,children:[Object(P.jsxs)(lt.a,{elevation:3,className:f.paperContent,children:[Object(P.jsx)(xt.a,{className:f.avatar,children:Object(P.jsx)(St.a,{})}),Object(P.jsx)(E.a,{variant:"h5",color:"textSecondary",component:"h5",children:c?"Login":"Sign Up"}),S?Object(P.jsx)(q.a,{color:"secondary"}):Object(P.jsxs)("form",{className:f.form,onSubmit:function(t){t.preventDefault(),g(c?function(t,e){return function(){var a=Object(w.a)(L.a.mark((function a(n){var r,c,o;return L.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"USER_LOGIN_REQUEST"}),a.next=4,k.post("/auth/signin",t);case 4:r=a.sent,c=r.data,o=Object(u.a)(Object(u.a)({},c.data.user),{},{token:c.data.token}),localStorage.setItem("currentUser",JSON.stringify(o)),n({type:"USER_LOGIN_SUCCESS",payload:o}),e.push("/"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),n({type:"USER_LOGIN_FAILED",payload:a.t0.message});case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(t){return a.apply(this,arguments)}}()}(d,e):function(t,e){return function(){var a=Object(w.a)(L.a.mark((function a(n){var r,c,o;return L.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"USER_REGISTER_REQUEST"}),a.next=4,k.post("/auth/signup",t);case 4:r=a.sent,c=r.data,o=Object(u.a)(Object(u.a)({},c.data.user),{},{token:c.data.token}),localStorage.setItem("currentUser",JSON.stringify(o)),n({type:"USER_REGISTER_SUCCESS",payload:o}),e.push("/"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),n({type:"USER_REGISTER_FAILED",payload:a.t0.message});case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(t){return a.apply(this,arguments)}}()}(d,e)),j(Dt)},children:[v&&Object(P.jsx)(E.a,{children:v}),Object(P.jsxs)(W.a,{container:!0,spacing:2,children:[!c&&Object(P.jsx)(Ut,{onChange:C,name:"name",type:"text",label:"Full Name",value:d.name}),Object(P.jsx)(Ut,{type:"email",onChange:C,label:"Email",name:"email",value:d.email}),Object(P.jsx)(Ut,{type:O?"text":"password",onChange:C,label:"Password",name:"password",showPassword:T,value:d.password}),!c&&Object(P.jsx)(Ut,{type:O?"text":"password",onChange:C,label:"Password Confirmation",name:"passwordConfirm",showPassword:T,value:d.passwordConfirm})]}),Object(P.jsx)(_.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:f.submit,children:c?"Login":"Sign Up"})]})]}),Object(P.jsx)(W.a,{container:!0,justify:"flex-end",style:{marginTop:"1rem"},children:Object(P.jsx)(W.a,{item:!0,children:Object(P.jsx)(_.a,{onClick:function(){i((function(t){return!t}))},children:c?"Belum Punya akun? Daftar":"Sudah Punya Akun? Masuk"})})})]})},wt=a(200),At=a(196),kt=a(206),Pt=a(201),Nt=Object(x.a)((function(t){return{formControl:{margin:t.spacing(2),minWidth:"50%"}}})),Ft=function(t){var e=t.value,a=t.onChange,n=t.name,r=t.id,c=t.options,o=void 0===c?[]:c,i=Nt();return Object(P.jsxs)(At.a,{className:i.formControl,children:[Object(P.jsx)(kt.a,{htmlFor:"input-select",children:"Grouping"}),Object(P.jsxs)(Pt.a,{value:e||"",inputProps:{name:n,id:r},onChange:function(t){return a(t.target.value)},children:[Object(P.jsx)(G.a,{value:e,children:Object(P.jsx)("em",{children:"None"})}),o.map((function(t,e){return Object(P.jsx)(G.a,{value:t._id,children:t.title},e)}))]})]})},Mt=Object(x.a)((function(t){return{formContainer:{marginTop:t.spacing(2)},mainForm:{padding:"1rem 2rem",display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:t.spacing(3)},submit:{marginTop:t.spacing(2)},productImage:{maxWidth:"50%",marginTop:t.spacing(1),borderRadius:"15px",display:"flex",alignItems:"center",justifyContent:"center"},image:{width:"100%",borderRadius:"15px"}}})),Gt={title:"",category:"",price:"",stock:"",image:""},Bt=function(t){var e=t.history,a=Mt(),r=Object(o.b)(),c=Object(f.g)().id,i=Object(n.useState)(Gt),s=Object(M.a)(i,2),l=s[0],d=s[1],j=Object(o.c)((function(t){return t.auth})).currentUser,p=Object(o.c)((function(t){return t.categories})).categories,b=Object(o.c)((function(t){return t.productForm})),O=b.error,h=b.loading,g=b.state,x=Object(o.c)((function(t){return t.product})).product,y=function(t){d(Object(u.a)(Object(u.a)({},l),{},Object(H.a)({},t.target.name,t.target.value)))};Object(n.useEffect)((function(){(!j||j&&"admin"!==j.role)&&e.push("/"),c?(r({type:"PRODUCT_FORM_ACCESS",payload:"edit"}),r(function(t){return function(){var e=Object(w.a)(L.a.mark((function e(a){var n,r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a({type:"PRODUCT_REQUEST"}),e.next=4,k.get("/products/".concat(t));case 4:n=e.sent,r=n.data,a({type:"PRODUCT_SUCCESS",payload:r.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:"PRODUCT_FAILURE",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}(c))):r({type:"PRODUCT_FORM_ACCESS",payload:"add"}),"edit"===g&&d((function(t){return Object(u.a)(Object(u.a)({},t),{},{title:x.title,category:x.category,price:x.price,stock:x.stock})})),r(ot())}),[j,e,r,c,x.title,x.category,x.price,x.stock,g]);var S=function(){return"edit"===g&&x?Object(P.jsx)(wt.a,{boxShadow:3,className:a.productImage,children:Object(P.jsx)("img",{src:x.image,alt:x.title,className:a.image})}):null};return Object(P.jsx)(m.a,{maxWidth:"sm",className:a.formContainer,children:Object(P.jsxs)(lt.a,{elevation:3,className:a.mainForm,children:[Object(P.jsx)(E.a,{variant:"h6",children:"Tambah Product"}),h&&Object(P.jsx)(q.a,{color:"secondary"}),O&&Object(P.jsx)(E.a,{variant:"body2",children:O}),Object(P.jsx)(S,{}),Object(P.jsxs)("form",{className:a.form,encType:"multipart/form-data",onSubmit:function(t){t.preventDefault(),r("edit"===g?function(t,e,a){return function(){var n=Object(w.a)(L.a.mark((function n(r,c){var o,i,s;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(s in o=c().auth.currentUser,r({type:"PRODUCT_FORM_SUBMIT_REQUEST"}),i=new FormData,e.image||delete e.image,e)i.append(s,e[s]);return n.next=7,k.patch("/products/".concat(t),i,{headers:{Authorization:"Bearer ".concat(o.token)}});case 7:r({type:"PRODUCT_FORM_SUBMIT_SUCCESS"}),a.push("/");case 9:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()}(x._id,l,e):function(t,e){return function(){var a=Object(w.a)(L.a.mark((function a(n,r){var c,o,i;return L.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(i in a.prev=0,c=r().auth.currentUser,n({type:"PRODUCT_FORM_SUBMIT_REQUEST"}),o=new FormData,t)o.append(i,t[i]);return a.next=7,k.post("/products",o,{headers:{Authorization:"Bearer ".concat(c.token)}});case 7:n({type:"PRODUCT_FORM_SUBMIT_SUCCESS"}),e.push("/"),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:"PRODUCT_FORM_SUBMIT_FAILED",payload:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(t,e){return a.apply(this,arguments)}}()}(l,e))},children:[Object(P.jsxs)(W.a,{container:!0,spacing:2,children:[Object(P.jsx)(Ut,{name:"title",label:"Nama Produk",type:"text",value:l.title,onChange:y}),Object(P.jsx)(Ft,{options:p,value:l.category,onChange:function(t){d(Object(u.a)(Object(u.a)({},l),{},{category:t}))}}),Object(P.jsx)(Ut,{name:"price",label:"Harga",type:"number",value:l.price,onChange:y}),Object(P.jsx)(Ut,{name:"stock",label:"Stok",type:"number",value:l.stock,onChange:y}),Object(P.jsx)(Ut,{name:"image",type:"file",onChange:function(t){d(Object(u.a)(Object(u.a)({},l),{},{image:t.target.files[0]}))},req:!1})]}),Object(P.jsx)(_.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:a.submit,children:"Save"})]})]})})},Qt=function(){return Object(P.jsxs)(g.a,{children:[Object(P.jsx)(h.a,{}),Object(P.jsx)(F,{}),Object(P.jsx)(m.a,{maxWidth:"lg",children:Object(P.jsxs)(f.c,{children:[Object(P.jsx)(f.a,{path:"/",exact:!0,component:st}),Object(P.jsx)(f.a,{path:"/cart",exact:!0,component:ft}),Object(P.jsx)(f.a,{path:"/Auth",exact:!0,component:Lt}),Object(P.jsx)(f.a,{path:"/product/:id?",component:Bt})]})})]})};a(145);c.a.render(Object(P.jsx)(o.a,{store:O,children:Object(P.jsx)(Qt,{})}),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.d2551d41.chunk.js.map